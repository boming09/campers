<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cp.campers.reservePayment.model.dao.ReserPayMapper">

	<resultMap id="reserPayResultMap" type="com.cp.campers.reservePayment.model.vo.ReserveInfo">
		<id property="reserNo" column="RESER_NO"/>
		<result property="userNo" column="USER_NO"/>
		<result property="reserName" column="RESER_NAME"/>
		<result property="phone" column="PHONE"/>
		<result property="reserState" column="RESER_STATE"/>
		<result property="request" column="REQUEST"/>
		<result property="checkIn" column="CHECKIN"/>
		<result property="checkOut" column="CHECKOUT"/>
		<result property="accountNum" column="ACCOUNT_NUM"/>
		<result property="accountHol" column="ACCOUNT_HOL"/>
		<result property="bank" column="BANK"/>
		<result property="roomQua" column="ROOM_QUA"/>
		<result property="roomNo" column="ROOM_NO"/>
	</resultMap>
	
	<insert id="insertReserve" parameterType="com.cp.campers.reservePayment.model.vo.ReserveInfo">
		INSERT 
		  INTO RESERVE
		   (
		  	  RESER_NO
		  	, USER_NO 
		  	, RESER_NAME
		  	, PHONE
		  	, RESER_STATE
		  	, REQUEST
		  	, CHECKIN
		  	, CHECKOUT
		  	, ACCOUNT_NUM
		  	, ACCOUNT_HOL
		  	, BANK
		  	, ROOM_QUA
		  	, ROOM_NO 
		   )
		   VALUES
		   (
		      SEQ_RESER_NO.NEXTVAL
		   	, #{ userNo }    <!-- 임시값. 예약 쪽페이지 구현된 후 로그인한 유저의 회원번호 세션에 담아 파라미터로 넘겨줘서 insert 처리하기  -->
		   	, #{ reserName }
		   	, #{ phone }
		   	, DEFAULT
		   	, #{ request }
		   	, #{ checkIn }
		   	, #{ checkOut }
		   	, #{ accountNum }
		   	, #{ accountHol }
		   	, #{ bank }
		   	, #{ roomQua }
		   	, 1 <!-- 임시값. 예약하기 버튼 눌렀을 때 숙소번호 reservePay.html로 가져와서 결제하기 클릭 시 hidden으로 같이 넘기기  --> 
		   )
	</insert>
	
	
	<insert id="insertPayment" parameterType="com.cp.campers.reservePayment.model.vo.PaymentInfo">
		INSERT 
		  INTO PAYMENT
		   (
		  	  PAY_NO
		  	, PAY_AMOUNT 
		  	, PAY_DATE
		  	, PAY_KIND
		  	, RESER_NO
		   )
		   VALUES
		   (
		      SEQ_PAY_NO.NEXTVAL
		   	, #{ payAmount }
		   	, SYSDATE
		   	, #{ payKind }
		   	, SEQ_RESER_NO.CURRVAL
		   )
	</insert>
	







</mapper>